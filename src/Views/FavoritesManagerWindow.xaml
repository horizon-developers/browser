<?xml version="1.0" encoding="utf-8" ?>
<Window
    x:Class="Horizon.Views.FavoritesManagerWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:favorites="using:Horizon.Core.Favorites"
    xmlns:local="using:Horizon.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="Favorites Manager"
    mc:Ignorable="d">

    <Window.SystemBackdrop>
        <MicaBackdrop />
    </Window.SystemBackdrop>

    <Grid x:Name="rootGrid" Margin="5">
        <Grid.KeyboardAccelerators>
            <KeyboardAccelerator Key="Escape" Invoked="WindowKeyboardAccelerator_Invoked" />
        </Grid.KeyboardAccelerators>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <TextBox
            x:Name="SearchTextBox"
            Grid.Row="0"
            KeyDown="TextBox_KeyDown"
            PlaceholderText="Type here to search.." />
        <ListView
            x:Name="FavoritesListView"
            Grid.Row="1"
            Margin="0,5,0,0"
            Loaded="FavoritesListView_Loaded"
            RightTapped="FavoritesListView_RightTapped">
            <ListView.ItemTemplate>
                <DataTemplate x:DataType="favorites:FavoriteItem">
                    <StackPanel Margin="-5,10,-5,10" ToolTipService.ToolTip="{x:Bind Url}">
                        <TextBlock
                            FontSize="16"
                            FontWeight="SemiBold"
                            Text="{x:Bind Title}"
                            TextTrimming="CharacterEllipsis" />
                        <TextBlock
                            FontSize="12"
                            Foreground="{ThemeResource SystemAccentColorDark1}"
                            Text="{x:Bind Url}"
                            TextTrimming="CharacterEllipsis" />
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
            <ListView.ContextFlyout>
                <CommandBarFlyout
                    x:Name="FavoritesContextMenu"
                    AlwaysExpanded="True"
                    Placement="BottomEdgeAlignedLeft">
                    <AppBarButton
                        Click="FavContextItem_Click"
                        Tag="Copy"
                        ToolTipService.ToolTip="Copy link">
                        <AppBarButton.Icon>
                            <FontIcon Glyph="&#xE16F;" />
                        </AppBarButton.Icon>
                    </AppBarButton>
                    <AppBarButton
                        Click="FavContextItem_Click"
                        Foreground="Red"
                        Icon="Delete"
                        Tag="Delete" />
                    <CommandBarFlyout.SecondaryCommands>
                        <AppBarButton
                            Click="FavContextItem_Click"
                            Label="Copy link text"
                            Tag="CopyText">
                            <AppBarButton.Icon>
                                <FontIcon Glyph="&#xE16F;" />
                            </AppBarButton.Icon>
                        </AppBarButton>
                    </CommandBarFlyout.SecondaryCommands>
                </CommandBarFlyout>
            </ListView.ContextFlyout>
        </ListView>
    </Grid>
</Window>
